# Polymarket Trader Analysis Tools

Complete suite of analysis tools for examining trader behavior and performance on Polymarket.

## Tools Overview

### 1. trader_performance_analysis.py
**Analyzes actual trading performance based on market outcomes**

**What it does:**
- Calculates win rates from resolved markets
- Computes ROI (Return on Investment) with real P&L
- Ranks traders by performance metrics
- Identifies most profitable traders

**Key Metrics:**
- Win Rate: % of trades on winning side
- ROI: % return on invested capital
- Total P&L: Actual profit/loss in dollars
- Combined Score: Balanced performance metric

**When to use:**
- Validate your monitoring criteria ($10k volume, 50 trades)
- Find consistently profitable traders
- Understand which traders actually make money
- Compare performance across time periods

**Output:**
- Top 10 by win rate
- Top 10 by ROI
- Top 10 by combined score
- CSV export with full metrics

ðŸ“– [Read full documentation](ANALYSIS_README.md)

---

### 2. trading_behavior_analysis.py
**Analyzes trading patterns, habits, and behavioral characteristics**

**What it does:**
- Examines betting patterns (bet sizes, consistency)
- Calculates market diversification
- Tracks activity frequency and timing
- Classifies traders into behavioral types

**Key Metrics:**
- Avg/Median bet sizes with consistency score
- Diversification score (market variety)
- Trades per day/week
- Most active day/hour
- Activity trend (increasing/decreasing/stable)

**Trading Style Categories:**
- Power User: High volume, high frequency, diversified
- High Volume Specialist: Many trades, focused markets
- Big Better: Large bets, infrequent trading
- Micro Trader: Small bets, many trades, diversified
- Cautious Diversifier: Moderate, consistent, balanced
- Weekend Warrior: Weekend-focused activity
- +5 more categories

**When to use:**
- Understand trader behavior patterns
- Identify "power users" vs casual traders
- Detect hot streaks (high activity in 48h)
- Find traders similar to known performers
- Research market psychology

**Output:**
- Most active traders leaderboard
- Most diversified traders leaderboard
- Biggest bettors leaderboard
- Power users leaderboard
- Trading style distribution
- CSV export with all behavior metrics

ðŸ“– [Read full documentation](BEHAVIOR_ANALYSIS_README.md)

---

## Quick Start

### Prerequisites
- `polymarket_tracker.db` must exist (generated by `main.py`)
- Database should have collected trades for several days
- Python 3.7+ with standard library only (no external deps)

### Running Analysis

```bash
# Performance analysis (win rates, ROI)
python trader_performance_analysis.py

# Behavior analysis (patterns, styles)
python trading_behavior_analysis.py

# See calculation demos (no database needed)
python test_analysis_demo.py
python test_behavior_demo.py
```

### Time Period Selection

Both tools offer:
1. Last 7 days
2. Last 30 days
3. All time
4. All periods (sequential)

---

## Comparison

| Feature | Performance Analysis | Behavior Analysis |
|---------|---------------------|-------------------|
| **Focus** | Outcomes & profits | Patterns & habits |
| **Requires** | Resolved markets | Any trades |
| **Main Output** | Win rates, ROI | Betting patterns, styles |
| **Best For** | Finding winners | Understanding behavior |
| **Key Metric** | ROI % | Power Score |
| **Limitation** | Needs resolved markets | Pattern recognition |

---

## Combined Workflow

### Step 1: Collect Data
```bash
# Run monitoring (in background)
python main.py
```

### Step 2: Analyze Behavior (Early Stage)
After collecting ~500+ trades:
```bash
python trading_behavior_analysis.py
```

**What you'll learn:**
- Which traders are most active?
- Who are the "power users"?
- What's the typical bet size?
- How diversified are traders?

### Step 3: Analyze Performance (After Markets Resolve)
After markets start resolving (days/weeks later):
```bash
python trader_performance_analysis.py
```

**What you'll learn:**
- Which traders actually win?
- What's the typical ROI?
- Do high-volume traders perform better?
- Which behavioral patterns correlate with success?

### Step 4: Cross-Reference
Compare the outputs:
```bash
# Example questions:
- Do "Power Users" have better win rates?
- Are "Big Bettors" more profitable?
- Does diversification improve ROI?
- Do consistent bet sizes correlate with wins?
- Are "Weekend Warriors" less successful?
```

---

## Example Analysis Session

```bash
# 1. Check how much data you have
sqlite3 polymarket_tracker.db "SELECT COUNT(*) FROM trades;"
# Output: 1,523 trades

# 2. Run behavior analysis first (works with any data)
python trading_behavior_analysis.py
# Select: 3 (All time)

# Output shows:
# - 149 traders analyzed
# - 87 reliable (â‰¥10 trades)
# - 5 "Power Users" identified
# - Top trader: 0x7a9b2c4... (12.5 trades/day, 90% diversification)

# 3. Run performance analysis (needs resolved markets)
python trader_performance_analysis.py
# Select: 3 (All time)

# Output shows:
# - 23 markets resolved (26%)
# - 12 traders with â‰¥10 resolved trades
# - Top by win rate: 0x7a9b2c4... (78% win rate, 24% ROI)
# - Average win rate: 62%

# 4. Compare results
# Same trader (0x7a9b2c4...) is:
# - Behavior: "Power User" with high activity & diversification
# - Performance: Top win rate AND top ROI
# â†’ Conclusion: High engagement + diversification = better results
```

---

## CSV Exports

Both tools export detailed CSV files with timestamps:

### Performance Analysis CSV
```
trader_performance_alltime_20251112.csv
- Trader rankings by combined score
- Win rates, ROI, P&L for each trader
- Total trades vs resolved trades
- All performance metrics
```

### Behavior Analysis CSV
```
trading_behavior_alltime_20251112.csv
- Trader rankings by power score
- Betting patterns (avg/median/std dev)
- Diversification metrics
- Activity patterns and trends
- Trading style classifications
- Top 3 markets per trader
```

---

## Use Cases

### For Monitoring Strategy
**Goal**: Validate your $10k volume + 50 trades criteria

1. Run behavior analysis â†’ Find average volume and trade count
2. Compare your flagged traders to overall distribution
3. Check if high-volume correlates with sophistication (diversification, consistency)
4. Adjust criteria if needed

### For Trader Discovery
**Goal**: Find profitable traders to follow

1. Run performance analysis â†’ Identify high win rate + ROI traders
2. Run behavior analysis on same traders â†’ Understand their patterns
3. Look for common traits (bet sizes, diversification, activity)
4. Flag similar traders who haven't been performance-tested yet

### For Market Research
**Goal**: Understand Polymarket trading dynamics

1. Behavior analysis â†’ Trading style distribution
2. Check: Are most traders casual or sophisticated?
3. Activity patterns â†’ Peak trading times
4. Diversification â†’ Do traders specialize or explore?

### For Anomaly Detection
**Goal**: Spot unusual activity

1. Behavior analysis â†’ Identify "hot streak" traders (â‰¥5 trades in 48h)
2. Check activity trends â†’ Sudden increases may indicate conviction
3. Compare to historical patterns â†’ Unusual bet sizes or diversification
4. Cross-reference with performance â†’ Did activity spike predict wins?

---

## Technical Details

### Database Access
- Both tools use **read-only** connections
- Safe to run while `main.py` is collecting data
- No modifications to database
- No interference with monitoring

### Performance
| Traders | Behavior Analysis | Performance Analysis |
|---------|------------------|---------------------|
| 50 | <5 seconds | ~15 seconds* |
| 200 | ~10 seconds | ~45 seconds* |
| 500 | ~20 seconds | ~2 minutes* |

*Performance analysis slower due to API calls for market resolutions

### API Usage
- **Behavior analysis**: No API calls (pure database)
- **Performance analysis**: 1 API call per unique market (with caching)

### Dependencies
- Python 3.7+
- Standard library only (sqlite3, csv, statistics, etc.)
- No external packages required
- API key optional (in `.env`)

---

## Limitations

### Performance Analysis
- âš ï¸ Requires markets to resolve (can take days/weeks)
- âš ï¸ Early data will show "0 resolved markets"
- âš ï¸ Win rate only accurate with â‰¥10 resolved trades
- âš ï¸ Some markets may not have clear resolution data

### Behavior Analysis
- âš ï¸ Patterns not meaningful with <10 trades per trader
- âš ï¸ Timestamp parsing may fail for some trades
- âš ï¸ Hot streak detection is time-of-analysis dependent
- âš ï¸ Style classification uses heuristics (not ML)

---

## Troubleshooting

### "No trades found"
**Cause**: Database empty or no trades in time period
**Solution**: Let `main.py` run longer to collect data

### "No resolved markets"
**Cause**: Markets haven't closed yet (normal for recent data)
**Solution**: Wait for markets to resolve, or use behavior analysis instead

### "All traders low reliability"
**Cause**: Most traders have <10 trades
**Solution**:
- Use longer time period (all time vs 7 days)
- Let monitoring collect more data
- Lower threshold in code if needed

### Slow performance analysis
**Cause**: Many unique markets to check via API
**Solution**:
- First run is slowest (builds cache)
- Use shorter time periods (7 days vs all time)
- Subsequent runs faster (cached resolutions)

---

## Future Enhancements

Planned improvements:
- [ ] Combined analysis tool (behavior + performance in one run)
- [ ] Visualizations (charts, graphs, heatmaps)
- [ ] Correlation analysis (which behaviors predict success?)
- [ ] Predictive modeling (ML-based trader classification)
- [ ] Real-time monitoring integration
- [ ] Web dashboard for results
- [ ] Alerting for high-value traders
- [ ] Category-specific analysis (geopolitics vs sports performance)
- [ ] Social network analysis (trader connections)
- [ ] Market timing patterns (entry/exit analysis)

---

## Questions?

Both tools include:
- âœ… Progress indicators
- âœ… Error handling
- âœ… Clear output formatting
- âœ… Detailed CSV exports
- âœ… Comprehensive documentation

For issues:
1. Check database exists and has data
2. Verify monitoring script is running
3. Review specific error messages
4. Check documentation for troubleshooting

---

## Summary

**Performance Analysis** = "Who wins and how much?"
**Behavior Analysis** = "How do they trade?"

Use both together for complete trader profiling:
- Behavior tells you WHO to watch (patterns, sophistication)
- Performance tells you WHO to follow (actual results)

Both tools work independently and complement your monitoring system perfectly! ðŸŽ¯
